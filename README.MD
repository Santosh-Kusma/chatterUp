ğŸ“˜ Project Documentation â€“ Real-time Chat App

ğŸ“ Tech Stack

- Backend: Node.js, Express, Socket.IO
- Frontend: HTML, CSS, JavaScript (vanilla), EJS templating
- Database: MongoDB (through Mongoose)
- UI Features: Typing indicators, online/offline detection, previous messages

ğŸ“‚ Project Structure (Suggested)

project/
â”‚
â”œâ”€â”€ config/
â”‚ â””â”€â”€ mongoose.config.js    # MongoDB connection setup
â”‚
â”œâ”€â”€ public/                 # Static assets (CSS, JS, images)
â”‚
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ controller/
â”‚ â”‚ â””â”€â”€ chat.controller.js  # Handles rendering chat view
â”‚ â”œâ”€â”€ model/
â”‚ â”‚ â””â”€â”€ chat.model.js       # DB logic for chats
â”‚ â””â”€â”€ views/
â”‚ â””â”€â”€ index.ejs             # Main chat UI template
â”‚
â”œâ”€â”€ server.js               # Entry point (your provided code)
â””â”€â”€ package.json

âš™ï¸ Backend Logic

ğŸ”¸ `server.js`

- Express Setup:

  - Uses EJS as templating engine.
  - Serves static files from `/public`.
  - On route `/`, renders the chat interface.

- Socket.IO Setup:

  - Listens for WebSocket connections.
  - Manages:

    - New user joins
    - Online users list
    - Typing indicators
    - Sending/receiving chat messages
    - Disconnect events

# Socket Events:

| Event | Direction | Description |
| `join-user` | Client â†’ Server | Sent by client with username |
| `notify-online` | Server â†’ Client | Broadcast to others when a user joins |
| `notify-offline` | Server â†’ Client | Broadcast when user disconnects |
| `online-users` | Server â†’ Client | Sends updated online users list |
| `send-message` | Client â†’ Server | Chat message with metadata |
| `message` | Server â†’ Client | Broadcasts new message to all others |
| `user-typing` | Client â†’ Server | Typing indicator trigger |
| `typing` | Server â†’ Client | Notifies others who is typing |
| `stop-typing` | Client â†’ Server | Stop typing signal |
| `stopped-typing` | Server â†’ Client | Clear typing display |
| `previous-messages` | Client â†’ Server | Request for past messages |
| `load-prev-messages` | Server â†’ Client | Sends previous messages |

ğŸ§  Controller: `chat.controller.js`

Handles rendering the main chat UI using EJS.

js
getChatView(req, res) {
res.render("index");
}

ğŸ§¾ Model: `chat.model.js`

Responsible for MongoDB interaction. Two main methods:

- `addChat(name, message, timeStamp, avatar)` â†’ Saves new chat message.
- `loadPrevChats()` â†’ Fetches past messages from DB.

ğŸ¨ Frontend Behavior

ğŸ”¹ Join Flow

- Prompt user for name (loop until valid).
- Emit `join-user` event to notify server.

ğŸ”¹ Toast Notifications

- Shows custom messages (like "User joined/left") using a CSS-styled toast.

ğŸ”¹ Chat Functionality

- Show previous messages from DB on load.
- Self and broadcast messages styled differently.

ğŸ”¹ Typing Indicator

- `keypress` event sends `user-typing`.
- `click` anywhere emits `stop-typing`.

ğŸ”¸ CSS (for toast, chat, etc.)

ğŸ§ª Testing

- Open two different browser tabs.
- Join chat with different usernames.
- Test typing indicator, online/offline status, and message sync.

ğŸš€ Run Instructions

1.  Install Dependencies

npm install

2.  Start Server

node server.js

Make sure MongoDB is running and accessible via your config.

ğŸ“¦ Dependencies

Add these to your `package.json` if not already:

json
 "dependencies": {
    "cors": "^2.8.5",
    "ejs": "^3.1.10",
    "express": "^5.1.0",
    "mongoose": "^8.15.1",
    "socket.io": "^4.8.1"
  }
